(this.webpackJsonpdiscographiql=this.webpackJsonpdiscographiql||[]).push([[0],{109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(79),i=a.n(c),l=(a(96),a(34)),o=a(27),s=a(25),u=a(122),m=a(8),g=a(116),f={base:2,sm:3,lg:5},d=a(80),p=a(121),E=a(85);function v(e){var t=e.onQueryEntered;return r.a.createElement(d.a,{my:f},r.a.createElement(p.a,{size:"lg"},r.a.createElement(E.a,{type:"text",placeholder:"Search",onKeyDown:function(e){"Enter"===e.key&&t(e.currentTarget.value)}})))}var h=a(57),b=a(89),y=a(115),w=a(120),k=a(90),j=a(112),S=a(113),A=a(114);function D(e){var t=e.src,a=e.alt,c=e.fallBackSrc,i=Object(k.a)(e,["src","alt","fallBackSrc"]),o=Object(n.useState)(!1),s=Object(l.a)(o,2),u=s[0],m=s[1];return r.a.createElement(j.a,{isLoaded:u},r.a.createElement(S.a,Object.assign({},i,{backgroundColor:"gray.300"}),r.a.createElement(A.a,{src:t,alt:a,fallbackSrc:c,objectFit:"cover",opacity:u?1:0,transition:"opacity .3s",onLoad:function(){m(!0)}})))}function O(){var e=Object(h.a)(["\n  query Artists($partialName: String!) {\n    queryArtists(byName: $partialName) {\n      id\n      name\n      image\n    }\n  }\n"]);return O=function(){return e},e}var q=Object(o.gql)(O());function C(e){var t=e.query,a=e.onArtistSelected,n=Object(o.useQuery)(q,{variables:{partialName:t}}),c=n.loading,i=n.error,l=n.data;return c?r.a.createElement(b.a,null):i?r.a.createElement(y.a,null,"Something went wrong. Please try again later."):l&&0!==l.queryArtists.length?r.a.createElement(w.a,{columns:{base:2,sm:3,lg:5},spacing:f},l.queryArtists.map((function(e){return r.a.createElement(m.a,{key:e.id,textAlign:"center",onClick:function(){a(e)},cursor:"pointer"},r.a.createElement(D,{src:e.image,alt:e.name,ratio:1,maxW:"400px"}),r.a.createElement(g.a,{size:"sm",m:f},e.name))}))):r.a.createElement(y.a,null,"No search results.")}function N(e){var t=e.showing,a=e.onArtistSelected,c=Object(n.useState)(""),i=Object(l.a)(c,2),o=i[0],s=i[1];return r.a.createElement(m.a,{d:t?"block":"none",m:f},r.a.createElement(g.a,null,"DiscographiQL"),r.a.createElement(v,{onQueryEntered:function(e){a(void 0),s(e)}}),!!o&&r.a.createElement(C,{query:o,onArtistSelected:a}))}var x=a(119),B=a(117);function z(e){var t=e.artist;return r.a.createElement(m.a,{w:"100%",overflow:"hidden",backgroundColor:"#2e2e2e",pos:"relative"},r.a.createElement(A.a,{src:t.image,objectFit:"cover",w:"100%",h:"30vh",opacity:.2,style:{filter:"blur(3px)"}}),r.a.createElement(B.a,{pos:"absolute",alignItems:"center",justify:"center",w:"100%",h:"100%",top:0},r.a.createElement(g.a,{size:"2xl",color:"white"},t.name)))}var Q=a(88),$={sortDescending:!1,filterDuplicates:!1};function F(e,t){return!!e.find((function(e){return e.name===t.name}))?e:[].concat(Object(Q.a)(e),[t])}var I=a(118),P=a(62);function W(e){var t=e.config,a=e.onFilterConfigChanged;return r.a.createElement(I.a,{spacing:4},r.a.createElement(P.a,{variantColor:"gray",size:"sm",onClick:function(){return a({sortDescending:!t.sortDescending,filterDuplicates:t.filterDuplicates})}},t.sortDescending?"Sort ascending":"Sort descending"),r.a.createElement(P.a,{variantColor:"gray",size:"sm",onClick:function(){return a({sortDescending:t.sortDescending,filterDuplicates:!t.filterDuplicates})}},t.filterDuplicates?"Show duplicate titles":"Hide duplicate titles"))}function L(){var e=Object(h.a)(["\n  query ArtistPage($fullName: String!) {\n    queryArtists(byName: $fullName) {\n      id\n      albums {\n        id\n        name\n        image\n      }\n    }\n  }\n"]);return L=function(){return e},e}var J=Object(o.gql)(L());function M(e){var t=e.artist,a=Object(o.useQuery)(J,{variables:{fullName:t.name}}),c=a.loading,i=a.error,s=a.data,u=Object(n.useState)($),d=Object(l.a)(u,2),p=d[0],E=d[1],v=r.a.createElement(y.a,null,"No search results.");if(c)v=r.a.createElement(b.a,null);else if(i)v=r.a.createElement(y.a,null,"Something went wrong fetching this artist's discography. Please try again later.");else if(s&&s.queryArtists.length>0){var h=s.queryArtists.find((function(e){return e.id===t.id}));if(h){var k=function(e,t){var a,n,r=e;return t.filterDuplicates&&(r=e.reduce(F,[])),a=r,n=t.sortDescending,r=a.slice().sort((function(e,t){return n?t.name.localeCompare(e.name):e.name.localeCompare(t.name)}))}(h.albums,p);v=r.a.createElement(w.a,{columns:{base:2,sm:3,lg:5},spacing:f},k.map((function(e){var t=e.id,a=e.name,n=e.image;return r.a.createElement(m.a,{key:t,textAlign:"center"},r.a.createElement(D,{src:n,alt:a,ratio:1,maxW:"400px"}),r.a.createElement(g.a,{size:"md",mx:0,my:f},a))})))}}return r.a.createElement(m.a,{textAlign:"center",margin:f},r.a.createElement(m.a,{my:10},r.a.createElement(g.a,{m:f},"Discography"),r.a.createElement(W,{config:p,onFilterConfigChanged:E})),v)}function _(e){var t=e.artist,a=e.onNavigateBack;return r.a.createElement(m.a,null,r.a.createElement(H,{onNavigateBack:a}),r.a.createElement(z,{artist:t}),r.a.createElement(M,{artist:t}))}function H(e){var t=e.onNavigateBack;return r.a.createElement(m.a,{pos:"absolute",zIndex:1},r.a.createElement(x.a,{"aria-label":"Back to search",icon:"arrow-back",onClick:t,variant:"ghost",size:"lg",color:"white",_hover:{bg:"transparent"},_active:{bg:"transparent"}}))}var K=new o.ApolloClient({uri:"https://spotify-graphql-server.herokuapp.com/graphql?",cache:new o.InMemoryCache});var T=function(){var e=Object(n.useState)(void 0),t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.createElement(o.ApolloProvider,{client:K},r.a.createElement(s.a,null,r.a.createElement(u.a,null),r.a.createElement(N,{onArtistSelected:function(e){c(e)},showing:!a}),a&&r.a.createElement(_,{artist:a,onNavigateBack:function(){c(void 0)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,t,a){e.exports=a(109)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.6ba0eb9e.chunk.js.map