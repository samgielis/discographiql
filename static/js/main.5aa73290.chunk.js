(this.webpackJsonpdiscographiql=this.webpackJsonpdiscographiql||[]).push([[0],{100:function(e,t,a){},108:function(e,t,a){},114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(82),i=a.n(c),o=(a(100),a(32)),l=a(29),s=a(26),m=a(129),u=a(8),d=a(84),g=a(117),f=a(64),h=a(58),b=a(89),E=a(62),p=a(126),v={base:2,sm:3,lg:5},y=Object(E.a)(Object(E.a)({},p.a),{},{colors:Object(E.a)({brand:{accent:p.a.colors.green[400],light:"white",mediumlight:"#eaeaea",mediumdark:"#2e2e2e",dark:"black",opaquelight:"#e2e8f02e",opaquedark:"#00000036"}},p.a.colors)});function k(e){var t=e.onQueryEntered;return r.a.createElement(d.a,{my:v,w:"60%"},r.a.createElement(g.a,{size:"lg"},r.a.createElement(f.a,{children:r.a.createElement(h.a,{name:"search",color:"gray.300"})}),r.a.createElement(b.a,{type:"text",placeholder:"Search",borderRadius:0,borderColor:"brand.opaquelight",color:"brand.mediumlight",bg:"brand.opaquedark",onKeyDown:function(e){"Enter"===e.key&&t(e.currentTarget.value)}})))}var S=a(59),j=a(127),w=a(27),O=a(121),x=a(36),C=a(94),q=a(118),z=a(119),A=a(120);function D(e){var t=e.src,a=(e.alt,Object(C.a)(e,["src","alt"])),c=Object(n.useState)(!t),i=Object(o.a)(c,2),l=i[0],s=i[1];return r.a.createElement(q.a,{isLoaded:l},r.a.createElement(z.a,Object.assign({},a,{backgroundColor:"gray.300"}),r.a.createElement(A.a,{src:t,objectFit:"cover",opacity:l?1:0,transition:"opacity .3s",onLoad:function(){s(!0)}})))}function N(e){var t=e.node,a=e.icon,n=e.onClick,c=e.maxW,i=e.iconColor,o=void 0===i?"brand.light":i,l=t.name,s=t.image;return r.a.createElement(u.a,{textAlign:"center",maxW:c},r.a.createElement(u.a,{pos:"relative",onClick:n,cursor:"pointer"},r.a.createElement(D,{src:s,alt:l,ratio:1}),r.a.createElement(F,{icon:a,color:o})),r.a.createElement(O.a,{size:"md",mx:0,my:v},l))}function F(e){var t=e.icon,a=e.color;return r.a.createElement(x.a,{w:"100%",h:"100%",pos:"absolute",top:0,bg:"brand.dark",color:a,opacity:0,_hover:{opacity:.8},transition:"opacity .3s"},r.a.createElement(u.a,{as:t,fontSize:"4rem",margin:"auto",height:"100%"}))}function B(){var e=Object(S.a)(["\n  query Artists($partialName: String!) {\n    queryArtists(byName: $partialName) {\n      id\n      name\n      image\n    }\n  }\n"]);return B=function(){return e},e}var Q=Object(l.gql)(B());function W(e){var t=e.query,a=e.onArtistSelected,n=e.onSearchStateChange,c=Object(l.useQuery)(Q,{variables:{partialName:t}}),i=c.loading,o=c.error,s=c.data;if(i)n("loading");else if(o)n("error");else{if(s&&0!==s.queryArtists.length)return n("completed"),r.a.createElement(j.a,{columns:{base:2,sm:3,lg:5},spacing:v,m:v},s.queryArtists.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(N,{node:e,maxW:"400px",icon:w.c,onClick:function(){a(e)}}))})));n("no results")}return r.a.createElement("div",null)}var I=a(128),$=function(e){var t=e.imageSrc,a=e.title,n=e.children,c=e.color,i=void 0===c?"brand.light":c;return r.a.createElement(I.a,{pos:"relative",alignItems:"center",justify:"center",h:"30vh",spacing:3,overflow:"hidden",backgroundColor:"brand.mediumdark"},r.a.createElement(A.a,{src:t,objectFit:"cover",w:"100%",opacity:.2,style:{filter:"blur(3px)"},pos:"absolute",zIndex:0}),r.a.createElement(O.a,{as:"h1",size:"2xl",color:i,zIndex:1},a),r.a.createElement(r.a.Fragment,null,n))},_=a(122),L=a(93);a(108);function H(e){var t=e.searchState;if("completed"===t)return r.a.createElement("div",null);var a=r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{as:w.a,id:"animated-arrow",fontSize:"5rem"}),r.a.createElement(_.a,{fontSize:{base:"xl",lg:"2xl"}},"There's nothing here yet.",r.a.createElement("br",null)," ",r.a.createElement("br",null)," Browse your favourite artists,",r.a.createElement("br",null),"check their discography",r.a.createElement("br",null),"and listen on Spotify."));return"loading"===t?a=r.a.createElement(L.a,{size:"xl"}):"error"===t?a=r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{as:w.d,fontSize:"5rem"}),r.a.createElement(_.a,{fontSize:{base:"xl",lg:"2xl"}},"Something's wrong with your query.")):"no results"===t&&(a=r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{as:w.b,fontSize:"5rem"}),r.a.createElement(_.a,{fontSize:{base:"xl",lg:"2xl"}},"We didn't find anything matching your search."))),r.a.createElement(P,null,a)}var P=function(e){var t=e.children;return r.a.createElement(I.a,{align:"center",justify:"center",objectFit:"fill",m:"auto",minH:"70vh",color:"brand.mediumdark",textAlign:"center"},t)};function J(e){var t=e.showing,a=e.onArtistSelected,c=Object(n.useState)(""),i=Object(o.a)(c,2),l=i[0],s=i[1],m=Object(n.useState)("idle"),d=Object(o.a)(m,2),g=d[0],f=d[1];return r.a.createElement(u.a,{d:t?"block":"none"},r.a.createElement(M,{handleQueryEntered:function(e){e||f("idle"),a(void 0),s(e)}}),!!l&&r.a.createElement(W,{query:l,onArtistSelected:a,onSearchStateChange:f}),r.a.createElement(H,{searchState:g}))}function M(e){var t=e.handleQueryEntered;return r.a.createElement($,{title:"DiscographiQL",color:"brand.accent"},r.a.createElement(k,{onQueryEntered:t}))}var R=a(125),T=a(65),K=a(123),G=r.a.forwardRef((function(e,t){return r.a.createElement(T.a,Object.assign({size:"md",ref:t,as:K.a},e))}));function U(e){var t=e.artist;return r.a.createElement($,{imageSrc:t.image,title:t.name},r.a.createElement(G,{backgroundColor:"brand.accent",href:"https://open.spotify.com/artist/".concat(t.id),target:"_blank",rel:"noreferrer"},r.a.createElement(u.a,{as:w.e,mr:".5em",fontSize:"1.2em"}),"Listen"))}var V=a(92),X={sortDescending:!1,filterDuplicates:!1};function Y(e,t){return!!e.find((function(e){return e.name===t.name}))?e:[].concat(Object(V.a)(e),[t])}var Z=a(124);function ee(e){var t=e.config,a=e.onFilterConfigChanged,n={bg:"brand.mediumdark",color:"white",size:"sm",_hover:{color:"brand.light",bg:"brand.dark"}};return r.a.createElement(Z.a,{spacing:4},r.a.createElement(T.a,Object.assign({},n,{onClick:function(){return a({sortDescending:!t.sortDescending,filterDuplicates:t.filterDuplicates})}}),t.sortDescending?"Sort ascending":"Sort descending"),r.a.createElement(T.a,Object.assign({},n,{onClick:function(){return a({sortDescending:t.sortDescending,filterDuplicates:!t.filterDuplicates})}}),t.filterDuplicates?"Show duplicate titles":"Hide duplicate titles"))}function te(){var e=Object(S.a)(["\n  query ArtistPage($fullName: String!) {\n    queryArtists(byName: $fullName) {\n      id\n      albums {\n        id\n        name\n        image\n      }\n    }\n  }\n"]);return te=function(){return e},e}var ae=Object(l.gql)(te());function ne(e){var t=e.artist,a=Object(l.useQuery)(ae,{variables:{fullName:t.name}}),c=a.loading,i=a.error,s=a.data,m=Object(n.useState)(X),d=Object(o.a)(m,2),g=d[0],f=d[1],h=r.a.createElement(_.a,null,"No search results.");if(c)h=r.a.createElement(L.a,null);else if(i)h=r.a.createElement(_.a,null,"Something went wrong fetching this artist's discography. Please try again later.");else if(s&&s.queryArtists.length>0){var b=s.queryArtists.find((function(e){return e.id===t.id}));if(b){var E=function(e,t){var a,n,r=e;return t.filterDuplicates&&(r=e.reduce(Y,[])),a=r,n=t.sortDescending,r=a.slice().sort((function(e,t){return n?t.name.localeCompare(e.name):e.name.localeCompare(t.name)}))}(b.albums,g);h=r.a.createElement(j.a,{columns:{base:2,sm:3,lg:5},spacing:v},E.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(N,{node:e,maxW:"400px",icon:w.e,iconColor:"brand.accent",onClick:function(){window.open("https://open.spotify.com/album/".concat(e.id))}}))})))}}return r.a.createElement(u.a,{textAlign:"center",margin:v},r.a.createElement(u.a,{my:10},r.a.createElement(O.a,{m:v},"Discography"),r.a.createElement(ee,{config:g,onFilterConfigChanged:f})),h)}function re(e){var t=e.artist,a=e.onNavigateBack;return r.a.createElement(u.a,null,r.a.createElement(ce,{onNavigateBack:a}),r.a.createElement(U,{artist:t}),r.a.createElement(ne,{artist:t}))}function ce(e){var t=e.onNavigateBack;return r.a.createElement(u.a,{pos:"absolute",zIndex:1},r.a.createElement(R.a,{"aria-label":"Back to search",icon:"arrow-back",onClick:t,variant:"ghost",size:"lg",color:"brand.light",_hover:{bg:"transparent"},_active:{bg:"transparent"}}))}var ie=new l.ApolloClient({uri:"https://spotify-graphql-server.herokuapp.com/graphql?",cache:new l.InMemoryCache});var oe=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(l.ApolloProvider,{client:ie},r.a.createElement(s.a,{theme:y},r.a.createElement(m.a,null),r.a.createElement(u.a,{bg:"brand.mediumlight",minH:"100vh"},r.a.createElement(J,{onArtistSelected:function(e){c(e)},showing:!a}),a&&r.a.createElement(re,{artist:a,onNavigateBack:function(){c(void 0)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,a){e.exports=a(114)}},[[95,1,2]]]);
//# sourceMappingURL=main.5aa73290.chunk.js.map